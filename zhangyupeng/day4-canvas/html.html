<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
        document.documentElement.style.fontSize = window.innerWidth / 750 * 100 + 'px';
    </script>
    <link rel="stylesheet" href="swiper/swiper.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="wrap">
        <header class="header">
            <span>&lt;</span>
            <ul class="list">
                <li class="active">大盘拍片</li>
                <li>城市拍片</li>
            </ul>
            <span>%</span>
        </header>
        <main class="main swiper-container">
            <div class="swiper-wrapper">
                <div class="onePage swiper-slide">
                    <div class="top">
                        <span>前一天</span>
                        <p>2017</p>
                        <span>后一天</span>
                    </div>
                    <div class="all">
                        <ul>
                            <li>全国</li>
                            <li>全时段</li>
                            <li>场次</li>
                        </ul>
                    </div>
                    <div class="origin">
                        <canvas class="box" style="background:#f5f5f5"></canvas>
                    </div>
                    <table class="table">
                        <tr class="thead">
                            <td>影片</td>
                            <td>场次占比</td>
                            <td>场次</td>
                            <td>票房</td>
                        </tr>
                        <tr>
                            <td class="names">唐人街探案 II</td>
                            <td>70%</td>
                            <td>104，333</td>
                            <td>9.3亿</td>
                        </tr>
                        <tr>
                            <td class="names">唐人街探案 II</td>
                            <td>70%</td>
                            <td>104，333</td>
                            <td>9.3亿</td>
                        </tr>
                        <tr>
                            <td class="names">唐人街探案 II</td>
                            <td>70%</td>
                            <td>104，333</td>
                            <td>9.3亿</td>
                        </tr>
                        <tr>
                            <td class="names">唐人街探案 II</td>
                            <td>70%</td>
                            <td>104，333</td>
                            <td>9.3亿</td>
                        </tr>
                        <tr>
                            <td class="names">唐人街探案 II</td>
                            <td>70%</td>
                            <td>104，333</td>
                            <td>9.3亿</td>
                        </tr>
                        <tr>
                            <td class="names">唐人街探案 II</td>
                            <td>70%</td>
                            <td>104，333</td>
                            <td>9.3亿</td>
                        </tr>
                        <tr>
                            <td class="names">唐人街探案 II</td>
                            <td>70%</td>
                            <td>104，333</td>
                            <td>9.3亿</td>
                        </tr>
                    </table>
                </div>
                <div class="swiper-slide">
                    第二页
                </div>
            </div>

        </main>
    </div>
    <script src="jq/jquery-1.7.1.min.js"></script>
    <script src="iscroll/iscroll.js"></script>
    <script src="swiper/swiper.min.js"></script>
    <script>
        var mySwiper = new Swiper('.main', {
            on: {
                slideChangeTransitionStart: function() {
                    var index = this.activeIndex;
                    change(index);
                }
            }
        })
        $('.list li').on('click', function() {
            var index = $(this).index();
            change(index);
            mySwiper.slideTo(index);
        })

        function change(index) {
            $('.list li').eq(index).addClass('active').siblings().removeClass('active')
        }
        $('.box').width($('body').width())
        $('.box').height($('body').width())


        var num = 0;
        $('.onePage').children().each(function() {
            num += $(this).height();
        })
        $('.onePage').css({
            height: num
        });
        var myIscroll = new IScroll('.swiper-wrapper');
        var box = document.querySelector('.box');
        box.width = $('body').width();
        box.height = $('body').width();
        var hb = box.getContext('2d');
        var Deg = Math.PI / 180;
        //hb.arc(box.width / 2, box.width / 2, box.width / 2, 0, 360 * deg);
        // hb.fillStyle = '#f00'
        // hb.fill();
        var data = [{
            color: '#3AA5FF',
            deg: 120
        }, {
            color: '#006600',
            deg: 50
        }, {
            color: '#00CC00',
            deg: 30
        }, {
            color: '#663300',
            deg: 20
        }, {
            color: '#0000CC',
            deg: 10
        }, {
            color: '#FFCC00',
            deg: 5
        }, {
            color: '#FF3333',
            deg: 5
        }, {
            color: '#33FFFF',
            deg: 5
        }, {
            color: '#806BCA',
            deg: 20
        }, {
            color: '#62C282',
            deg: 10
        }, {
            color: '#5CC2AC',
            deg: 15
        }, {
            color: '#6BD68E',
            deg: 50
        }, {
            color: '#FDAA40',
            deg: 10
        }, {
            color: '#A372B4',
            deg: 10
        }];
        var start = -90;
        data.forEach(function(file, i) {
            hb.beginPath();
            var end = start + file.deg;
            hb.moveTo(box.width / 2, box.width / 2)
            hb.arc(box.width / 2, box.width / 2, 100, start * Deg, end * Deg)
            hb.fillStyle = file.color;
            hb.fill()
            start = end;
        });
        hb.beginPath();
        hb.arc(box.width / 2, box.width / 2, 50, -90 * Deg, 360 * Deg)
        hb.fillStyle = '#fff';
        hb.fill();
        hb.beginPath()
        hb.fillStyle = '#000';
        hb.textAlign = 'center';
        hb.textBaseline = 'middle';
        hb.font = '22px bold';
        hb.fillText('雷神3', box.width / 2, box.width / 2);
    </script>
</body>

</html>